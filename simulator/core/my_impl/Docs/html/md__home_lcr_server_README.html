<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>framework_Jin-new_server: Documentation for the whole program</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">framework_Jin-new_server
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Documentation for the whole program </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>How to use</h2>
<p>Open the Sever(first): </p><pre class="fragment">open the agentSim(home/CLionProject/framework_jin)
</pre><p>Virtual Car(home/mkz-mpc-control/output.txt) (optional): </p><pre class="fragment">Each row: current car number &amp; first car id &amp; first car x &amp; first car y &amp; first car angle &amp; first car vx first car vy &amp; first car angular v &amp; second ….
0.1 s update one row.
If fisrt three col is 0 (x,y,angle) —&gt; car disappear.

To add the virtual car, click "Startvc" at the manager website.
To start it, click "Start" at the manager website.(If you have started it once, you don't need to do this again.)
</pre><p>Human Car(optional): </p><pre class="fragment">(1) Initial steel, brake, accelerator : Desktop: FFB_Cs ——&gt; initDevice ——&gt; start
(2) Send car info(steel, brake, accelerator) to server: Desktop/Fan/MscArch/UDP_project/UDP_proecjt.sln ——&gt; run
(3) Rendering（渲染）: D:/sim/11.13/Rending(network)/launch.ps1
(4) Chose the agenttype as FourWheelCar and type in the initial states, click "add" at the manager website.
(5) To start it, click "Start" at the manager website.(If you have started it once, you don't need to do this again.)

How to create a new map (rendering) : D:/sim/11.13/12.13/MyProejct/MyProject.uproject
    Change IP address: open .sln (need to rebuild solution and new to create a new rendering)
    Unreal4 (how to create road in unreal4 )
    after modify, create a new rendering: File -&gt; Package Project -&gt; windows -&gt; 64bit ———&gt; create a new folder called windowNoEditor
    Copy all file under windowNoEditor to D:/sim/11.13/Rendering(network)/ front, left, right (replace)
    How to connect with server: MyProject.sln/ Game
</pre><p>Real Car(optional): </p><pre class="fragment">(1) Collect data from real car: home/mkz-mpc-control ——&gt; open power shell ——&gt; source devel/setup.sh ———&gt; rosrun collect collect_node (For real car)  and then use manager addRealCar
(2) Chose the agenttype as RealCar and type in the initial states, click "add" at the manager website.
(3) To start it, click "Start" at the manager website.(If you have started it once, you don't need to do this again.)
</pre><h2>How the Main tread Work</h2>
<p>When you run the server, it will creat a thread pool include 10 threads for simulator to calculate agents. The thread pool will open one extra thread to manage these 10 threads automatically.</p>
<p>Then, it will creat a simulator and a server. The simulator and the server will share their SimulatorState, AgentDictionary and humanInputs, so that the manager can manage the simulator. And, other session can get what they need. The server will sign three kinds of services for for input, manager and rendering and open 5 threads to waiting for the command.</p>
<p>At last, it will invoke simulator::run which is a endless loop to update the simulator.</p>
<h2>Documents</h2>
<p>If you change some documents and want to regenerate the document. Remember to change the address in the Doxyfile. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
